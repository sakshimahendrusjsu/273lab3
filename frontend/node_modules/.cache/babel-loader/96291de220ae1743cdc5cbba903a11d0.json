{"ast":null,"code":"import _defineProperty from \"/Users/sakshi/Documents/AllCodes/React/273/lab/frontend/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nvar _jsxFileName = \"/Users/sakshi/Documents/AllCodes/React/273/lab/frontend/src/Cart/OrderFood.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { getFooditems, getCartItems, setPrice, placeOrder, clearCartItems } from '../Redux/actions/orderActions';\nimport Products from './Product';\nimport Basket from './Basket';\nimport { Redirect } from 'react-router';\n\nclass OrderFood extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handleRemoveFromCart = (e, product) => {\n      const newCartItems = this.props.cartItems.filter(a => a._id !== product._id);\n      localStorage.setItem('cartItems', JSON.stringify(newCartItems));\n      this.props.getCartItems();\n    };\n\n    this.handleAddToCart = (e, product) => {\n      console.log(\"e\", e.target);\n      console.log(\"product in handle to cart\", product);\n      let cartItems = this.props.cartItems;\n      console.log(\"carItems\", cartItems);\n\n      if (cartItems == undefined) {\n        cartItems = [];\n      }\n\n      let productAlreadyInCart = false;\n      cartItems.forEach(cp => {\n        console.log(cp._id);\n        console.log(product._id);\n\n        if (cp._id === product._id) {\n          cp.count += 1;\n          productAlreadyInCart = true;\n        }\n      });\n\n      if (!productAlreadyInCart) {\n        cartItems.push(_objectSpread({}, product, {\n          count: 1\n        }));\n      }\n\n      localStorage.setItem('cartItems', JSON.stringify(cartItems));\n      this.props.getCartItems();\n    };\n\n    this.checkout = e => {\n      console.log(\"price checkout\", e);\n      this.props.setPrice(e);\n      let price = {\n        'totalPrice': e\n      };\n      this.props = Object.assign(price, this.props);\n      console.log(\"added price\", this.props);\n      localStorage.setItem(\"restaurant_name\", this.state.restaurantDetails.name);\n      localStorage.setItem(\"restaurant_id\", this.state.restaurantDetails._id);\n      localStorage.setItem(\"owner_id\", this.state.restaurantDetails.id);\n      this.props.placeOrder(this.props);\n      localStorage.removeItem('cartItems');\n      this.props.clearCartItems();\n      console.log(\"props car items\", this.props.cartItems);\n      this.setState({\n        redirectVar: React.createElement(Redirect, {\n          to: \"/order\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 79\n          },\n          __self: this\n        })\n      });\n    };\n\n    console.log(\"orderfood props\", props.location);\n    this.state = {\n      restaurantDetails: props.location.state.res,\n      result: [],\n      cuisines: [],\n      red: \"\"\n    };\n  }\n\n  componentWillMount() {\n    this.renderMyData();\n    localStorage.setItem(\"restaurant_name\", this.state.restaurantDetails.name);\n    localStorage.setItem(\"restaurant_id\", this.state.restaurantDetails._id);\n  }\n\n  renderMyData() {\n    if (localStorage.getItem('cartItems')) {\n      console.log(\"car items exist\");\n      this.props.getCartItems();\n    }\n  }\n\n  render() {\n    console.log(\"cartItems\", this.props.cartItems);\n    console.log(\"items\", this.props.items);\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87\n      },\n      __self: this\n    }, this.state.redirectVar, React.createElement(\"div\", {\n      className: \"container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89\n      },\n      __self: this\n    }, React.createElement(\"hr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col-md-9\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92\n      },\n      __self: this\n    }, React.createElement(\"h2\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93\n      },\n      __self: this\n    }, this.state.restaurantDetails.name), React.createElement(\"hr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94\n      },\n      __self: this\n    }), React.createElement(Products, {\n      products: this.state.restaurantDetails.sections,\n      type: \"buyer\",\n      handleAddToCart: this.handleAddToCart,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"col-md-3\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97\n      },\n      __self: this\n    }, React.createElement(Basket, {\n      cartItems: this.props.cartItems,\n      checkout: this.checkout,\n      handleRemoveFromCart: this.handleRemoveFromCart,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98\n      },\n      __self: this\n    })))));\n  }\n\n}\n\nfunction mapStateToProps(store) {\n  return {\n    output: store.order.ouput,\n    message: store.order.message,\n    items: store.order.items,\n    total: store.order.total,\n    cartItems: store.order.cartItems,\n    price: store.order.price\n  };\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    getCartItems: () => dispatch(getCartItems()),\n    setPrice: data => dispatch(setPrice(data)),\n    placeOrder: data => dispatch(placeOrder(data)),\n    clearCartItems: () => dispatch(clearCartItems())\n  };\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(OrderFood);","map":{"version":3,"sources":["/Users/sakshi/Documents/AllCodes/React/273/lab/frontend/src/Cart/OrderFood.js"],"names":["React","Component","connect","getFooditems","getCartItems","setPrice","placeOrder","clearCartItems","Products","Basket","Redirect","OrderFood","constructor","props","handleRemoveFromCart","e","product","newCartItems","cartItems","filter","a","_id","localStorage","setItem","JSON","stringify","handleAddToCart","console","log","target","undefined","productAlreadyInCart","forEach","cp","count","push","checkout","price","Object","assign","state","restaurantDetails","name","id","removeItem","setState","redirectVar","location","res","result","cuisines","red","componentWillMount","renderMyData","getItem","render","items","sections","mapStateToProps","store","output","order","ouput","message","total","mapDispatchToProps","dispatch","data"],"mappings":";;;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,OAAT,QAAwB,aAAxB;AACA,SAASC,YAAT,EAAsBC,YAAtB,EAAmCC,QAAnC,EAA4CC,UAA5C,EAAuDC,cAAvD,QAA6E,+BAA7E;AACA,OAAOC,QAAP,MAAqB,WAArB;AACA,OAAOC,MAAP,MAAmB,UAAnB;AACA,SAAQC,QAAR,QAAuB,cAAvB;;AAEA,MAAMC,SAAN,SAAwBV,SAAxB,CAAkC;AAC9BW,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACf,UAAMA,KAAN;;AADe,SAwBnBC,oBAxBmB,GAwBI,CAACC,CAAD,EAAIC,OAAJ,KAAgB;AACpC,YAAMC,YAAY,GAAG,KAAKJ,KAAL,CAAWK,SAAX,CAAqBC,MAArB,CAA4BC,CAAC,IAAIA,CAAC,CAACC,GAAF,KAAUL,OAAO,CAACK,GAAnD,CAArB;AACCC,MAAAA,YAAY,CAACC,OAAb,CAAqB,WAArB,EAAkCC,IAAI,CAACC,SAAL,CAAeR,YAAf,CAAlC;AACA,WAAKJ,KAAL,CAAWT,YAAX;AACH,KA5BkB;;AAAA,SA8BnBsB,eA9BmB,GA8BD,CAACX,CAAD,EAAIC,OAAJ,KAAgB;AAC9BW,MAAAA,OAAO,CAACC,GAAR,CAAY,GAAZ,EAAgBb,CAAC,CAACc,MAAlB;AACAF,MAAAA,OAAO,CAACC,GAAR,CAAY,2BAAZ,EAAwCZ,OAAxC;AACA,UAAIE,SAAS,GAAG,KAAKL,KAAL,CAAWK,SAA3B;AACAS,MAAAA,OAAO,CAACC,GAAR,CAAY,UAAZ,EAAuBV,SAAvB;;AACA,UAAGA,SAAS,IAAEY,SAAd,EAAwB;AACpBZ,QAAAA,SAAS,GAAC,EAAV;AACH;;AACD,UAAIa,oBAAoB,GAAG,KAA3B;AACAb,MAAAA,SAAS,CAACc,OAAV,CAAkBC,EAAE,IAAI;AAChBN,QAAAA,OAAO,CAACC,GAAR,CAAYK,EAAE,CAACZ,GAAf;AACAM,QAAAA,OAAO,CAACC,GAAR,CAAYZ,OAAO,CAACK,GAApB;;AACA,YAAIY,EAAE,CAACZ,GAAH,KAAWL,OAAO,CAACK,GAAvB,EAA4B;AACxBY,UAAAA,EAAE,CAACC,KAAH,IAAY,CAAZ;AACAH,UAAAA,oBAAoB,GAAG,IAAvB;AACH;AACJ,OAPL;;AAQA,UAAI,CAACA,oBAAL,EAA2B;AACnBb,QAAAA,SAAS,CAACiB,IAAV,mBAAoBnB,OAApB;AAA6BkB,UAAAA,KAAK,EAAE;AAApC;AACH;;AACDZ,MAAAA,YAAY,CAACC,OAAb,CAAqB,WAArB,EAAkCC,IAAI,CAACC,SAAL,CAAeP,SAAf,CAAlC;AACA,WAAKL,KAAL,CAAWT,YAAX;AACP,KApDkB;;AAAA,SAsDnBgC,QAtDmB,GAsDPrB,CAAD,IAAK;AACbY,MAAAA,OAAO,CAACC,GAAR,CAAY,gBAAZ,EAA6Bb,CAA7B;AACC,WAAKF,KAAL,CAAWR,QAAX,CAAoBU,CAApB;AACA,UAAIsB,KAAK,GAAG;AACR,sBAAetB;AADP,OAAZ;AAGA,WAAKF,KAAL,GAAWyB,MAAM,CAACC,MAAP,CAAcF,KAAd,EAAoB,KAAKxB,KAAzB,CAAX;AACAc,MAAAA,OAAO,CAACC,GAAR,CAAY,aAAZ,EAA0B,KAAKf,KAA/B;AACAS,MAAAA,YAAY,CAACC,OAAb,CAAqB,iBAArB,EAAuC,KAAKiB,KAAL,CAAWC,iBAAX,CAA6BC,IAApE;AACApB,MAAAA,YAAY,CAACC,OAAb,CAAqB,eAArB,EAAqC,KAAKiB,KAAL,CAAWC,iBAAX,CAA6BpB,GAAlE;AACAC,MAAAA,YAAY,CAACC,OAAb,CAAqB,UAArB,EAAgC,KAAKiB,KAAL,CAAWC,iBAAX,CAA6BE,EAA7D;AACA,WAAK9B,KAAL,CAAWP,UAAX,CAAsB,KAAKO,KAA3B;AACAS,MAAAA,YAAY,CAACsB,UAAb,CAAwB,WAAxB;AACA,WAAK/B,KAAL,CAAWN,cAAX;AACAoB,MAAAA,OAAO,CAACC,GAAR,CAAY,iBAAZ,EAA8B,KAAKf,KAAL,CAAWK,SAAzC;AACA,WAAK2B,QAAL,CAAc;AACdC,QAAAA,WAAW,EAAG,oBAAC,QAAD;AAAU,UAAA,EAAE,EAAE,QAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADA,OAAd;AAGH,KAxEkB;;AAEfnB,IAAAA,OAAO,CAACC,GAAR,CAAY,iBAAZ,EAA8Bf,KAAK,CAACkC,QAApC;AACA,SAAKP,KAAL,GAAa;AACTC,MAAAA,iBAAiB,EAAG5B,KAAK,CAACkC,QAAN,CAAeP,KAAf,CAAqBQ,GADhC;AAETC,MAAAA,MAAM,EAAE,EAFC;AAGTC,MAAAA,QAAQ,EAAE,EAHD;AAITC,MAAAA,GAAG,EAAC;AAJK,KAAb;AAMH;;AAEDC,EAAAA,kBAAkB,GAAG;AACjB,SAAKC,YAAL;AACA/B,IAAAA,YAAY,CAACC,OAAb,CAAqB,iBAArB,EAAuC,KAAKiB,KAAL,CAAWC,iBAAX,CAA6BC,IAApE;AACApB,IAAAA,YAAY,CAACC,OAAb,CAAqB,eAArB,EAAqC,KAAKiB,KAAL,CAAWC,iBAAX,CAA6BpB,GAAlE;AACH;;AAEDgC,EAAAA,YAAY,GAAG;AACX,QAAI/B,YAAY,CAACgC,OAAb,CAAqB,WAArB,CAAJ,EAAuC;AACnC3B,MAAAA,OAAO,CAACC,GAAR,CAAY,iBAAZ;AACA,WAAKf,KAAL,CAAWT,YAAX;AACH;AACJ;;AAoDDmD,EAAAA,MAAM,GAAG;AACL5B,IAAAA,OAAO,CAACC,GAAR,CAAY,WAAZ,EAAwB,KAAKf,KAAL,CAAWK,SAAnC;AACAS,IAAAA,OAAO,CAACC,GAAR,CAAY,OAAZ,EAAqB,KAAKf,KAAL,CAAW2C,KAAhC;AACA,WACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACK,KAAKhB,KAAL,CAAWM,WADhB,EAEA;AAAK,MAAA,SAAS,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADJ,EAEI;AAAK,MAAA,SAAS,EAAC,KAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAK,MAAA,SAAS,EAAC,UAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAK,KAAKN,KAAL,CAAWC,iBAAX,CAA6BC,IAAlC,CADA,EAEI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFJ,EAGI,oBAAC,QAAD;AAAU,MAAA,QAAQ,EAAE,KAAKF,KAAL,CAAWC,iBAAX,CAA6BgB,QAAjD;AAA2D,MAAA,IAAI,EAAE,OAAjE;AAA0E,MAAA,eAAe,EAAE,KAAK/B,eAAhG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAHJ,CADJ,EAMI;AAAK,MAAA,SAAS,EAAC,UAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI,oBAAC,MAAD;AAAQ,MAAA,SAAS,EAAE,KAAKb,KAAL,CAAWK,SAA9B;AAAyC,MAAA,QAAQ,EAAE,KAAKkB,QAAxD;AAAkE,MAAA,oBAAoB,EAAE,KAAKtB,oBAA7F;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADJ,CANJ,CAFJ,CAFA,CADJ;AAkBH;;AAhG6B;;AAmGlC,SAAS4C,eAAT,CAAyBC,KAAzB,EAAgC;AAC5B,SAAO;AACHC,IAAAA,MAAM,EAAED,KAAK,CAACE,KAAN,CAAYC,KADjB;AAEHC,IAAAA,OAAO,EAAEJ,KAAK,CAACE,KAAN,CAAYE,OAFlB;AAGHP,IAAAA,KAAK,EAAEG,KAAK,CAACE,KAAN,CAAYL,KAHhB;AAIHQ,IAAAA,KAAK,EAAEL,KAAK,CAACE,KAAN,CAAYG,KAJhB;AAKH9C,IAAAA,SAAS,EAAEyC,KAAK,CAACE,KAAN,CAAY3C,SALpB;AAMHmB,IAAAA,KAAK,EAAGsB,KAAK,CAACE,KAAN,CAAYxB;AANjB,GAAP;AAQH;;AAED,SAAS4B,kBAAT,CAA4BC,QAA5B,EAAsC;AAClC,SAAO;AACH9D,IAAAA,YAAY,EAAE,MAAM8D,QAAQ,CAAC9D,YAAY,EAAb,CADzB;AAEHC,IAAAA,QAAQ,EAAG8D,IAAD,IAASD,QAAQ,CAAC7D,QAAQ,CAAC8D,IAAD,CAAT,CAFxB;AAGH7D,IAAAA,UAAU,EAAG6D,IAAD,IAAUD,QAAQ,CAAC5D,UAAU,CAAC6D,IAAD,CAAX,CAH3B;AAIJ5D,IAAAA,cAAc,EAAC,MAAM2D,QAAQ,CAAC3D,cAAc,EAAf;AAJzB,GAAP;AAMH;;AAED,eAAeL,OAAO,CAACwD,eAAD,EAAkBO,kBAAlB,CAAP,CAA6CtD,SAA7C,CAAf","sourcesContent":["import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { getFooditems,getCartItems,setPrice,placeOrder,clearCartItems } from '../Redux/actions/orderActions';\r\nimport Products from './Product';\r\nimport Basket from './Basket';\r\nimport {Redirect} from 'react-router';\r\n\r\nclass OrderFood extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        console.log(\"orderfood props\",props.location);\r\n        this.state = {\r\n            restaurantDetails : props.location.state.res,\r\n            result: [],\r\n            cuisines :[],\r\n            red:\"\"\r\n          };\r\n    }\r\n    \r\n    componentWillMount() {\r\n        this.renderMyData();\r\n        localStorage.setItem(\"restaurant_name\",this.state.restaurantDetails.name);\r\n        localStorage.setItem(\"restaurant_id\",this.state.restaurantDetails._id);\r\n    }\r\n\r\n    renderMyData() {\r\n        if (localStorage.getItem('cartItems')) {\r\n            console.log(\"car items exist\");\r\n            this.props.getCartItems();\r\n        }\r\n    }\r\n\r\n    handleRemoveFromCart = (e, product) => {\r\n       const newCartItems = this.props.cartItems.filter(a => a._id !== product._id);\r\n        localStorage.setItem('cartItems', JSON.stringify(newCartItems));\r\n        this.props.getCartItems();\r\n    }\r\n\r\n    handleAddToCart = (e, product) => {\r\n        console.log(\"e\",e.target);\r\n        console.log(\"product in handle to cart\",product);\r\n        let cartItems = this.props.cartItems;\r\n        console.log(\"carItems\",cartItems);\r\n        if(cartItems==undefined){\r\n            cartItems=[];\r\n        }\r\n        let productAlreadyInCart = false;\r\n        cartItems.forEach(cp => {\r\n                console.log(cp._id);\r\n                console.log(product._id);\r\n                if (cp._id === product._id) {\r\n                    cp.count += 1;\r\n                    productAlreadyInCart = true;\r\n                }\r\n            });\r\n        if (!productAlreadyInCart) {\r\n                cartItems.push({ ...product, count: 1 });\r\n            }\r\n            localStorage.setItem('cartItems', JSON.stringify(cartItems));\r\n            this.props.getCartItems();\r\n    }\r\n\r\n    checkout = (e)=>{\r\n       console.log(\"price checkout\",e);\r\n        this.props.setPrice(e);\r\n        let price = {\r\n            'totalPrice' : e\r\n        }\r\n        this.props=Object.assign(price,this.props);\r\n        console.log(\"added price\",this.props);\r\n        localStorage.setItem(\"restaurant_name\",this.state.restaurantDetails.name);\r\n        localStorage.setItem(\"restaurant_id\",this.state.restaurantDetails._id);\r\n        localStorage.setItem(\"owner_id\",this.state.restaurantDetails.id);\r\n        this.props.placeOrder(this.props);\r\n        localStorage.removeItem('cartItems');\r\n        this.props.clearCartItems();\r\n        console.log(\"props car items\",this.props.cartItems);\r\n        this.setState({\r\n        redirectVar : <Redirect to= \"/order\"/>\r\n        });\r\n    }\r\n\r\n    render() {\r\n        console.log(\"cartItems\",this.props.cartItems)\r\n        console.log(\"items\", this.props.items)\r\n        return (\r\n            <div>\r\n                {this.state.redirectVar}\r\n            <div className=\"container\">\r\n                <hr />\r\n                <div className=\"row\">\r\n                    <div className=\"col-md-9\">\r\n                    <h2>{this.state.restaurantDetails.name}</h2>\r\n                        <hr />\r\n                        <Products products={this.state.restaurantDetails.sections} type={\"buyer\"} handleAddToCart={this.handleAddToCart} />\r\n                    </div>\r\n                    <div className=\"col-md-3\">\r\n                        <Basket cartItems={this.props.cartItems} checkout={this.checkout} handleRemoveFromCart={this.handleRemoveFromCart} />\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nfunction mapStateToProps(store) {\r\n    return {\r\n        output: store.order.ouput,\r\n        message: store.order.message,\r\n        items: store.order.items,\r\n        total: store.order.total,\r\n        cartItems: store.order.cartItems,\r\n        price : store.order.price\r\n    }\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n    return {\r\n        getCartItems: () => dispatch(getCartItems()),\r\n        setPrice: (data)=> dispatch(setPrice(data)),\r\n        placeOrder: (data) => dispatch(placeOrder(data)),\r\n       clearCartItems:() => dispatch(clearCartItems())\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(OrderFood);\r\n"]},"metadata":{},"sourceType":"module"}