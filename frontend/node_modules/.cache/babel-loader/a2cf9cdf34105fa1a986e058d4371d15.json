{"ast":null,"code":"import _defineProperty from \"/Users/sakshi/Documents/AllCodes/React/273/lab/frontend/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nvar _jsxFileName = \"/Users/sakshi/Documents/AllCodes/React/273/lab/frontend/src/ManageOrders/OwnerOrder.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { Component } from 'react';\nimport axios from 'axios';\nimport './table.css';\nimport Select from 'react-select';\nimport { Collapse, Navbar, NavbarToggler, NavbarBrand, Nav, NavItem, NavLink, UncontrolledDropdown, Button, DropdownToggle, DropdownMenu, DropdownItem } from 'reactstrap';\nimport { connect } from 'react-redux';\nimport { getOrderDeatilsOwner, handleStatus } from '../Redux/actions/orderActions';\nimport { Link } from 'react-router-dom';\n\nfunction Item(itemName, itemPrice, itemQuanity) {\n  this.itemName = itemName;\n  this.itemPrice = itemPrice;\n  this.itemQuanity = itemQuanity;\n}\n\nlet products = [];\n\nclass OwnerOrder extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handleStatus = (option, row, index) => {\n      console.log(option, \"^^^\", row, \"^^^^\", index);\n\n      if (this.state.selections[index] == index) {\n        console.log(\"returning or not\");\n        return;\n      }\n\n      this.state.selections[index] = index;\n      let body = {\n        'status': index.value,\n        'id': option._id\n      };\n      this.props.handleStatus(body);\n      this.renderMyData();\n    };\n\n    this.state = {\n      result: [],\n      rows: [],\n      status: \"\",\n      columns: ['OrderNo', 'Customer', 'CustomerAddress', 'Price', 'Quantity', 'Status', 'ItemDetails', 'Help'],\n      options: [],\n      successMessage: \"\",\n      selectedOption: \"\",\n      selections: [],\n      name: localStorage.getItem(\"restaurant_name\")\n    };\n    this.toggle = this.toggle.bind(this);\n    this.handleStatus = this.handleStatus.bind(this);\n  }\n\n  toggle() {\n    this.setState({\n      isOpen: !this.state.isOpen\n    });\n  }\n\n  getOption(id) {\n    this.setState(_objectSpread({}, this.state, {\n      selections: [...this.state.selections, this.state.selectedOption]\n    }));\n    return this.state.selectedOption;\n  }\n\n  componentWillMount() {\n    this.setState({\n      results: [],\n      rows: [],\n      selections: []\n    });\n  }\n\n  submitSignIn(e, status) {\n    console.log(\"stats\", status);\n\n    if (status == \"NEW\") {\n      this.state.selectedOption = {\n        value: 'NEW',\n        label: 'NEW'\n      };\n      this.state.options = [{\n        value: 'PREPARING',\n        label: 'PREPARING'\n      }, {\n        value: 'READY',\n        label: 'READY'\n      }, {\n        value: 'DELIVERED',\n        label: 'DELIVERED'\n      }, {\n        value: 'CANCELLED',\n        label: 'CANCELLED'\n      }];\n    } else if (status == \"PREPARING\") {\n      this.state.selectedOption = {\n        value: 'PREPARING',\n        label: 'PREPARING'\n      };\n      this.state.options = [{\n        value: 'READY',\n        label: 'READY'\n      }, {\n        value: 'DELIVERED',\n        label: 'DELIVERED'\n      }];\n    } else if (status == \"READY\") {\n      this.state.selectedOption = {\n        value: 'READY',\n        label: 'READY'\n      };\n      this.state.options = [{\n        value: 'DELIVERED',\n        label: 'DELIVERED'\n      }];\n    } else {\n      this.state.selectedOption = {\n        value: status,\n        label: status\n      };\n    }\n\n    this.state.status = status;\n    this.renderMyData();\n  }\n\n  async renderMyData() {\n    this.props.getOrderDeatilsOwner(this.state.status);\n    this.state.results = this.props.orderItems;\n    console.log(\"orderItems\", this.props.orderItems);\n  }\n\n  geItemDeatils(details = []) {\n    let cart = \"\";\n\n    if (details.length > 0) {\n      return cart = React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112\n        },\n        __self: this\n      }, React.createElement(\"ul\", {\n        style: {\n          marginLeft: -25,\n          listStyle: 'none'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113\n        },\n        __self: this\n      }, details.map((item, index) => React.createElement(\"li\", {\n        key: index,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115\n        },\n        __self: this\n      }, React.createElement(\"b\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116\n        },\n        __self: this\n      }, item.name), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116\n        },\n        __self: this\n      }), item.itemQuanity, \"\\xA0X\\xA0$\", item.price)))));\n    } else {\n      return cart = React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 124\n        },\n        __self: this\n      }, \"No\\xA0items\\xA0found!!\");\n    }\n  }\n\n  renderTableHeader() {\n    return this.state.columns.map((key, index) => {\n      return React.createElement(\"th\", {\n        key: index,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130\n        },\n        __self: this\n      }, key.toUpperCase());\n    });\n  }\n\n  renderTableData() {\n    console.log(\"render table \", this.state.selectedOption, this.props.orderItems);\n\n    if (this.props.orderItems != undefined) {\n      return this.props.orderItems.map((row, index) => {\n        const _id = row._id,\n              buyer_email = row.buyer_email,\n              total_price = row.total_price,\n              items = row.items;\n        return React.createElement(\"tr\", {\n          key: index,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 140\n          },\n          __self: this\n        }, React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 141\n          },\n          __self: this\n        }, index + 1), React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 142\n          },\n          __self: this\n        }, buyer_email), React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 143\n          },\n          __self: this\n        }, \"Apt\\xA0no.\", row.items.length, total_price, \"\\xA0,San\\xA0Jose\\xA0\"), React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 144\n          },\n          __self: this\n        }, total_price), React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 145\n          },\n          __self: this\n        }, row.items.length), React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 146\n          },\n          __self: this\n        }, React.createElement(Select, {\n          key: index,\n          value: e => this.getOption(index),\n          onChange: this.handleStatus.bind(this, row, index),\n          options: this.state.options,\n          autoFocus: true,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 146\n          },\n          __self: this\n        })), React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 152\n          },\n          __self: this\n        }, this.geItemDeatils(items)), React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 153\n          },\n          __self: this\n        }, React.createElement(Link, {\n          to: {\n            pathname: '/chat',\n            state: {\n              orderId: row,\n              userId: row.restaurant_name,\n              userId2: row.buyer_email,\n              id: row.owner_id\n            }\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 154\n          },\n          __self: this\n        }, React.createElement(Button, {\n          variant: \"outline-danger\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 154\n          },\n          __self: this\n        }, \"Chat\"))));\n      });\n    }\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164\n      },\n      __self: this\n    }, React.createElement(Navbar, {\n      color: \"light\",\n      light: true,\n      expand: \"md\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165\n      },\n      __self: this\n    }, React.createElement(NavbarBrand, {\n      href: \"/\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166\n      },\n      __self: this\n    }, \"GRUBHUB\"), React.createElement(NavbarToggler, {\n      onClick: this.toggle,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167\n      },\n      __self: this\n    }), React.createElement(Collapse, {\n      isOpen: this.state.isOpen,\n      navbar: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168\n      },\n      __self: this\n    }, React.createElement(Nav, {\n      className: \"ml-auto\",\n      navbar: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169\n      },\n      __self: this\n    }, React.createElement(UncontrolledDropdown, {\n      nav: true,\n      inNavbar: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170\n      },\n      __self: this\n    }, React.createElement(DropdownToggle, {\n      nav: true,\n      caret: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171\n      },\n      __self: this\n    }, \"Hi,\", this.state.name), React.createElement(DropdownMenu, {\n      right: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174\n      },\n      __self: this\n    }, React.createElement(DropdownItem, {\n      href: \"/ordero\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175\n      },\n      __self: this\n    }, \"Orders \\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\"), React.createElement(DropdownItem, {\n      href: \"/profile\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178\n      },\n      __self: this\n    }, \"Account \\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\"), React.createElement(DropdownItem, {\n      divider: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181\n      },\n      __self: this\n    }), React.createElement(DropdownItem, {\n      href: \"/logout\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182\n      },\n      __self: this\n    }, \"Logout \\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\")))))), React.createElement(\"h1\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190\n      },\n      __self: this\n    }, \"Restaurant\\xA0Orders\"), React.createElement(Nav, {\n      pills: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191\n      },\n      __self: this\n    }, React.createElement(NavItem, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192\n      },\n      __self: this\n    }, React.createElement(NavLink, {\n      onClick: e => this.submitSignIn(e, \"NEW\"),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193\n      },\n      __self: this\n    }, \"NEW\")), React.createElement(NavItem, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 195\n      },\n      __self: this\n    }, React.createElement(NavLink, {\n      onClick: e => this.submitSignIn(e, \"PREPARING\"),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196\n      },\n      __self: this\n    }, \"PREPARING\")), React.createElement(NavItem, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 198\n      },\n      __self: this\n    }, React.createElement(NavLink, {\n      onClick: e => this.submitSignIn(e, \"READY\"),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 199\n      },\n      __self: this\n    }, \"READY\")), React.createElement(NavItem, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201\n      },\n      __self: this\n    }, React.createElement(NavLink, {\n      onClick: e => this.submitSignIn(e, \"DELIVERED\"),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 202\n      },\n      __self: this\n    }, \"DELIVERED\")), React.createElement(NavItem, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 204\n      },\n      __self: this\n    }, React.createElement(NavLink, {\n      onClick: e => this.submitSignIn(e, \"CANCELLED\"),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 205\n      },\n      __self: this\n    }, \"CANCELLED\"))), React.createElement(\"table\", {\n      id: \"restaurant\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208\n      },\n      __self: this\n    }, React.createElement(\"thead\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 209\n      },\n      __self: this\n    }, this.renderTableHeader()), React.createElement(\"tbody\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 212\n      },\n      __self: this\n    }, this.renderTableData())));\n  }\n\n}\n\nfunction mapStateToProps(store) {\n  return {\n    output: store.order.ouput,\n    message: store.order.message,\n    orderItems: store.order.orderItems\n  };\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    getOrderDeatilsOwner: data => dispatch(getOrderDeatilsOwner(data)),\n    handleStatus: data => dispatch(handleStatus(data))\n  };\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(OwnerOrder);","map":{"version":3,"sources":["/Users/sakshi/Documents/AllCodes/React/273/lab/frontend/src/ManageOrders/OwnerOrder.js"],"names":["React","Component","axios","Select","Collapse","Navbar","NavbarToggler","NavbarBrand","Nav","NavItem","NavLink","UncontrolledDropdown","Button","DropdownToggle","DropdownMenu","DropdownItem","connect","getOrderDeatilsOwner","handleStatus","Link","Item","itemName","itemPrice","itemQuanity","products","OwnerOrder","constructor","props","option","row","index","console","log","state","selections","body","value","_id","renderMyData","result","rows","status","columns","options","successMessage","selectedOption","name","localStorage","getItem","toggle","bind","setState","isOpen","getOption","id","componentWillMount","results","submitSignIn","e","label","orderItems","geItemDeatils","details","cart","length","marginLeft","listStyle","map","item","price","renderTableHeader","key","toUpperCase","renderTableData","undefined","buyer_email","total_price","items","pathname","orderId","userId","restaurant_name","userId2","owner_id","render","mapStateToProps","store","output","order","ouput","message","mapDispatchToProps","dispatch","data"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport axios from 'axios';\r\nimport './table.css'\r\nimport Select from 'react-select';\r\nimport {\r\n    Collapse, Navbar, NavbarToggler, NavbarBrand, Nav, NavItem, NavLink, UncontrolledDropdown,Button,\r\n    DropdownToggle, DropdownMenu, DropdownItem\r\n} from 'reactstrap'\r\nimport { connect } from 'react-redux';\r\nimport { getOrderDeatilsOwner, handleStatus } from '../Redux/actions/orderActions';\r\nimport {Link} from 'react-router-dom';\r\nfunction Item(itemName, itemPrice, itemQuanity) {\r\n    this.itemName = itemName;\r\n    this.itemPrice = itemPrice;\r\n    this.itemQuanity = itemQuanity;\r\n}\r\n\r\nlet products = [];\r\nclass OwnerOrder extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            result: [],\r\n            rows: [],\r\n            status: \"\",\r\n            columns: ['OrderNo', 'Customer', 'CustomerAddress', 'Price', 'Quantity', 'Status', 'ItemDetails','Help'],\r\n            options: [],\r\n            successMessage: \"\",\r\n            selectedOption: \"\",\r\n            selections: [],\r\n            name: localStorage.getItem(\"restaurant_name\")\r\n        }\r\n        this.toggle = this.toggle.bind(this);\r\n        this.handleStatus = this.handleStatus.bind(this)\r\n    }\r\n\r\n\r\n    toggle() {\r\n        this.setState({\r\n            isOpen: !this.state.isOpen\r\n        });\r\n    }\r\n\r\n    getOption(id) {\r\n        this.setState({\r\n            ...this.state,\r\n            selections: [...this.state.selections, this.state.selectedOption]\r\n        });\r\n        return this.state.selectedOption;\r\n    }\r\n    componentWillMount() {\r\n        this.setState({\r\n            results: [],\r\n            rows: [],\r\n            selections: []\r\n        });\r\n    }\r\n\r\n    submitSignIn(e, status) {\r\n        console.log(\"stats\", status)\r\n        if (status == \"NEW\") {\r\n            this.state.selectedOption = { value: 'NEW', label: 'NEW' };\r\n            this.state.options = [\r\n                { value: 'PREPARING', label: 'PREPARING' },\r\n                { value: 'READY', label: 'READY' },\r\n                { value: 'DELIVERED', label: 'DELIVERED' },\r\n                { value: 'CANCELLED', label: 'CANCELLED' }\r\n            ]\r\n        } else if (status == \"PREPARING\") {\r\n            this.state.selectedOption = { value: 'PREPARING', label: 'PREPARING' };\r\n            this.state.options = [\r\n                { value: 'READY', label: 'READY' },\r\n                { value: 'DELIVERED', label: 'DELIVERED' }\r\n            ]\r\n        } else if (status == \"READY\") {\r\n            this.state.selectedOption = { value: 'READY', label: 'READY' };\r\n            this.state.options = [\r\n                { value: 'DELIVERED', label: 'DELIVERED' }\r\n            ]\r\n        } else {\r\n            this.state.selectedOption = { value: status, label: status };\r\n        }\r\n        this.state.status = status;\r\n        this.renderMyData();\r\n    }\r\n\r\n    handleStatus = (option, row, index) => {\r\n        console.log(option,\"^^^\",row,\"^^^^\",index)\r\n        if (this.state.selections[index] == index) {\r\n            console.log(\"returning or not\")\r\n            return;\r\n        }\r\n        this.state.selections[index] = index;\r\n        let body = {\r\n            'status': index.value,\r\n            'id': option._id\r\n        }\r\n        this.props.handleStatus(body);\r\n        this.renderMyData();\r\n    }\r\n\r\n    async renderMyData() {\r\n        this.props.getOrderDeatilsOwner(this.state.status);\r\n        this.state.results = this.props.orderItems;\r\n        console.log(\"orderItems\", this.props.orderItems);\r\n    }\r\n\r\n    geItemDeatils(details = []) {\r\n        let cart = \"\"\r\n        if (details.length > 0) {\r\n            return cart = <div>\r\n                <div>\r\n                    <ul style={{ marginLeft: -25, listStyle: 'none' }}>\r\n                        {details.map((item, index) => (\r\n                            <li key={index}>\r\n                                <b>{item.name}</b><br />\r\n                                {item.itemQuanity} X ${(item.price)}\r\n                            </li>))\r\n                        }\r\n                    </ul>\r\n                </div>\r\n            </div>\r\n        } else {\r\n            return cart = <div>No items found!!</div>\r\n        }\r\n    }\r\n\r\n    renderTableHeader() {\r\n        return this.state.columns.map((key, index) => {\r\n            return <th key={index}>{key.toUpperCase()}</th>\r\n        })\r\n    }\r\n\r\n    renderTableData() {\r\n        console.log(\"render table \", this.state.selectedOption, this.props.orderItems);\r\n        if (this.props.orderItems != undefined) {\r\n            return this.props.orderItems.map((row, index) => {\r\n                const { _id, buyer_email, total_price, items } = row\r\n                return (\r\n                    <tr key={index}>\r\n                        <td>{index+1}</td>\r\n                        <td>{buyer_email}</td>\r\n                        <td>Apt no.{row.items.length}{total_price} ,San Jose </td>\r\n                        <td>{total_price}</td>\r\n                        <td>{row.items.length}</td>\r\n                        <td><Select key={index}\r\n                            value={(e) => this.getOption(index)}\r\n                            onChange={this.handleStatus.bind(this, row, index)}\r\n                            options={this.state.options}\r\n                            autoFocus={true} />\r\n                        </td>\r\n                        <td>{this.geItemDeatils(items)}</td>\r\n                        <td>\r\n                        <Link to={{ pathname: '/chat', state:{orderId:row,userId:row.restaurant_name,userId2:row.buyer_email,id:row.owner_id}}}><Button variant=\"outline-danger\">Chat</Button></Link>\r\n                        </td>\r\n                    </tr>\r\n                )\r\n            })\r\n        }\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div>\r\n                <Navbar color=\"light\" light expand=\"md\">\r\n                    <NavbarBrand href=\"/\">GRUBHUB</NavbarBrand>\r\n                    <NavbarToggler onClick={this.toggle} />\r\n                    <Collapse isOpen={this.state.isOpen} navbar>\r\n                        <Nav className=\"ml-auto\" navbar>\r\n                            <UncontrolledDropdown nav inNavbar>\r\n                                <DropdownToggle nav caret>\r\n                                    Hi,{this.state.name}\r\n                                </DropdownToggle>\r\n                                <DropdownMenu right>\r\n                                    <DropdownItem href=\"/ordero\">\r\n                                        Orders\r\n                               </DropdownItem>\r\n                                    <DropdownItem href=\"/profile\">\r\n                                        Account\r\n                               </DropdownItem>\r\n                                    <DropdownItem divider />\r\n                                    <DropdownItem href=\"/logout\">\r\n                                        Logout\r\n                               </DropdownItem>\r\n                                </DropdownMenu>\r\n                            </UncontrolledDropdown>\r\n                        </Nav>\r\n                    </Collapse>\r\n                </Navbar>\r\n                <h1>Restaurant Orders</h1>\r\n                <Nav pills>\r\n                    <NavItem>\r\n                        <NavLink onClick={(e) => this.submitSignIn(e, \"NEW\")}>NEW</NavLink>\r\n                    </NavItem>\r\n                    <NavItem>\r\n                        <NavLink onClick={(e) => this.submitSignIn(e, \"PREPARING\")}>PREPARING</NavLink>\r\n                    </NavItem>\r\n                    <NavItem>\r\n                        <NavLink onClick={(e) => this.submitSignIn(e, \"READY\")}>READY</NavLink>\r\n                    </NavItem>\r\n                    <NavItem>\r\n                        <NavLink onClick={(e) => this.submitSignIn(e, \"DELIVERED\")}>DELIVERED</NavLink>\r\n                    </NavItem>\r\n                    <NavItem>\r\n                        <NavLink onClick={(e) => this.submitSignIn(e, \"CANCELLED\")}>CANCELLED</NavLink>\r\n                    </NavItem>\r\n                </Nav>\r\n                <table id=\"restaurant\">\r\n                    <thead>\r\n                        {this.renderTableHeader()}\r\n                    </thead>\r\n                    <tbody>\r\n                        {this.renderTableData()}\r\n                    </tbody>\r\n                </table>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nfunction mapStateToProps(store) {\r\n    return {\r\n        output: store.order.ouput,\r\n        message: store.order.message,\r\n        orderItems: store.order.orderItems\r\n    }\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n    return {\r\n        getOrderDeatilsOwner: (data) => dispatch(getOrderDeatilsOwner(data)),\r\n        handleStatus: (data) => dispatch(handleStatus(data))\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(OwnerOrder);\r\n"]},"metadata":{},"sourceType":"module"}