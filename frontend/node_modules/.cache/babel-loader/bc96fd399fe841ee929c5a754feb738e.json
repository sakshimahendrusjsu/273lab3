{"ast":null,"code":"import _defineProperty from \"/Users/sakshi/Documents/AllCodes/React/273/lab/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _regeneratorRuntime from \"/Users/sakshi/Documents/AllCodes/React/273/lab/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/sakshi/Documents/AllCodes/React/273/lab/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/Users/sakshi/Documents/AllCodes/React/273/lab/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/sakshi/Documents/AllCodes/React/273/lab/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/sakshi/Documents/AllCodes/React/273/lab/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/sakshi/Documents/AllCodes/React/273/lab/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/sakshi/Documents/AllCodes/React/273/lab/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/Users/sakshi/Documents/AllCodes/React/273/lab/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/Users/sakshi/Documents/AllCodes/React/273/lab/frontend/src/Menu/ItemsPage.js\";\nimport React, { Component } from 'react';\nimport Products from '../Cart/Product';\nimport cookie from 'react-cookies';\nimport './list.css';\nimport { Collapse, Navbar, NavbarToggler, NavbarBrand, Nav, UncontrolledDropdown, DropdownToggle, DropdownMenu, DropdownItem } from 'reactstrap';\nimport { Redirect } from 'react-router';\nimport { connect } from 'react-redux';\nimport { getAll as _getAll, deleteSectionItem as _deleteSectionItem } from '../Redux/actions/sectionAction';\n\nvar ItemsPage =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(ItemsPage, _Component);\n\n  function ItemsPage(props) {\n    var _this;\n\n    _classCallCheck(this, ItemsPage);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(ItemsPage).call(this, props));\n\n    _this.handleRemoveItem = function (e, product, sectionId) {\n      console.log(\"e\", e.target);\n      console.log(\"product in handle to cart\", product);\n      var data = {\n        email: localStorage.getItem('email'),\n        name: localStorage.getItem('restaurant_name'),\n        section_id: sectionId,\n        product: product\n      };\n\n      _this.props.deleteSectionItem(data);\n\n      _this.renderMyData();\n    };\n\n    _this.state = {\n      currentPage: 1,\n      todosPerPage: 2,\n      menu: \"\",\n      renderPageNumbers: \"\",\n      name: localStorage.getItem(\"restaurant_name\")\n    };\n    _this.handleClick = _this.handleClick.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(ItemsPage, [{\n    key: \"handleClick\",\n    value: function handleClick(event) {\n      this.setState({\n        currentPage: Number(event.target.id)\n      });\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.renderMyData();\n    }\n  }, {\n    key: \"renderMyData\",\n    value: function () {\n      var _renderMyData = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee() {\n        var data;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                console.log(\"render data\");\n\n                if (!(localStorage.getItem(\"token\") != null)) {\n                  _context.next = 5;\n                  break;\n                }\n\n                data = {\n                  id: localStorage.getItem('_id'),\n                  email: localStorage.getItem('email'),\n                  name: localStorage.getItem('restaurant_name')\n                };\n                _context.next = 5;\n                return this.props.getAll(data);\n\n              case 5:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function renderMyData() {\n        return _renderMyData.apply(this, arguments);\n      }\n\n      return renderMyData;\n    }()\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this,\n          _React$createElement;\n\n      if (this.props.sections != undefined) {\n        console.log(\"sections agagae\");\n        var foodItems = this.props.sections;\n        var _this$state = this.state,\n            currentPage = _this$state.currentPage,\n            todosPerPage = _this$state.todosPerPage; // Logic for displaying todos\n\n        var indexOfLastTodo = currentPage * todosPerPage;\n        var indexOfFirstTodo = indexOfLastTodo - todosPerPage;\n        var currentTodos = foodItems.slice(indexOfFirstTodo, indexOfLastTodo); // Logic for displaying page numbers\n\n        var pageNumbers = [];\n\n        for (var i = 1; i <= Math.ceil(foodItems.length / todosPerPage); i++) {\n          pageNumbers.push(i);\n        }\n\n        this.state.renderPageNumbers = pageNumbers.map(function (number) {\n          return React.createElement(\"li\", {\n            key: number,\n            id: number,\n            onClick: _this2.handleClick,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 86\n            },\n            __self: this\n          }, number);\n        });\n\n        if (localStorage.getItem(\"token\") == null && localStorage.getItem(\"type\") != \"owner\") {\n          return React.createElement(Redirect, {\n            to: \"/\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 97\n            },\n            __self: this\n          });\n        }\n\n        console.log(\"menu\", this.props.sections);\n        this.state.menu = React.createElement(Products, {\n          products: currentTodos,\n          type: \"owner\",\n          handleRemoveItem: this.handleRemoveItem,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 100\n          },\n          __self: this\n        });\n      }\n\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103\n        },\n        __self: this\n      }, React.createElement(Navbar, {\n        color: \"light\",\n        light: true,\n        expand: \"md\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104\n        },\n        __self: this\n      }, React.createElement(NavbarBrand, {\n        href: \"/\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105\n        },\n        __self: this\n      }, \"GRUBHUB\"), React.createElement(NavbarToggler, {\n        onClick: this.toggle,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106\n        },\n        __self: this\n      }), React.createElement(Collapse, {\n        isOpen: this.state.isOpen,\n        navbar: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107\n        },\n        __self: this\n      }, React.createElement(Nav, {\n        className: \"ml-auto\",\n        navbar: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108\n        },\n        __self: this\n      }, React.createElement(UncontrolledDropdown, {\n        nav: true,\n        inNavbar: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109\n        },\n        __self: this\n      }, React.createElement(DropdownToggle, {\n        nav: true,\n        caret: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110\n        },\n        __self: this\n      }, \"Hi,\", this.state.name), React.createElement(DropdownMenu, {\n        right: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113\n        },\n        __self: this\n      }, React.createElement(DropdownItem, {\n        href: \"/ordero\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114\n        },\n        __self: this\n      }, \"Orders\"), React.createElement(DropdownItem, {\n        href: \"/profile\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117\n        },\n        __self: this\n      }, \"Account\"), React.createElement(DropdownItem, {\n        divider: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 120\n        },\n        __self: this\n      }), React.createElement(DropdownItem, {\n        href: \"/logout\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 121\n        },\n        __self: this\n      }, \"Logout\")))))), React.createElement(\"div\", {\n        className: \"container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129\n        },\n        __self: this\n      }, React.createElement(\"hr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"col-md-9\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 132\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        style: {\n          display: 'inline-block'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 133\n        },\n        __self: this\n      }, React.createElement(\"h2\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134\n        },\n        __self: this\n      }, \"MENU PAGE\"), React.createElement(\"a\", (_React$createElement = {\n        class: \"btn btn-default\",\n        style: {\n          position: 'absolute',\n          right: 1,\n          backgroundColor: '#000CBA',\n          color: \"#FFF000\"\n        },\n        href: \"/addS\"\n      }, _defineProperty(_React$createElement, \"class\", \"updatemenu\"), _defineProperty(_React$createElement, \"__source\", {\n        fileName: _jsxFileName,\n        lineNumber: 135\n      }), _defineProperty(_React$createElement, \"__self\", this), _React$createElement), \"UPDATE MENU\")), React.createElement(\"hr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137\n        },\n        __self: this\n      }), React.createElement(\"ul\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139\n        },\n        __self: this\n      }, this.state.menu), React.createElement(\"div\", {\n        style: {\n          display: 'flex',\n          flexDirection: 'row'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 142\n        },\n        __self: this\n      }, React.createElement(\"ul\", {\n        class: \"footer\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 143\n        },\n        __self: this\n      }, this.state.renderPageNumbers))))));\n    }\n  }]);\n\n  return ItemsPage;\n}(Component);\n\nfunction mapStateToProps(store) {\n  return {\n    output: store.section.output,\n    message: store.section.message,\n    sections: store.section.sections\n  };\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    getAll: function getAll(data) {\n      return dispatch(_getAll(data));\n    },\n    deleteSectionItem: function deleteSectionItem(data) {\n      return dispatch(_deleteSectionItem(data));\n    }\n  };\n}\n\nexport default withApollo(ItemsPage);","map":{"version":3,"sources":["/Users/sakshi/Documents/AllCodes/React/273/lab/frontend/src/Menu/ItemsPage.js"],"names":["React","Component","Products","cookie","Collapse","Navbar","NavbarToggler","NavbarBrand","Nav","UncontrolledDropdown","DropdownToggle","DropdownMenu","DropdownItem","Redirect","connect","getAll","deleteSectionItem","ItemsPage","props","handleRemoveItem","e","product","sectionId","console","log","target","data","email","localStorage","getItem","name","section_id","renderMyData","state","currentPage","todosPerPage","menu","renderPageNumbers","handleClick","bind","event","setState","Number","id","sections","undefined","foodItems","indexOfLastTodo","indexOfFirstTodo","currentTodos","slice","pageNumbers","i","Math","ceil","length","push","map","number","toggle","isOpen","display","position","right","backgroundColor","color","flexDirection","mapStateToProps","store","output","section","message","mapDispatchToProps","dispatch","withApollo"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport Products from '../Cart/Product';\r\nimport cookie from 'react-cookies';\r\nimport './list.css';\r\nimport {\r\n    Collapse, Navbar, NavbarToggler, NavbarBrand,\r\n    Nav,\r\n    UncontrolledDropdown,\r\n    DropdownToggle,\r\n    DropdownMenu,\r\n    DropdownItem\r\n} from 'reactstrap';\r\nimport { Redirect } from 'react-router';\r\nimport { connect } from 'react-redux';\r\nimport { getAll, deleteSectionItem } from '../Redux/actions/sectionAction';\r\n\r\nclass ItemsPage extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            currentPage: 1,\r\n            todosPerPage: 2,\r\n            menu: \"\",\r\n            renderPageNumbers: \"\",\r\n            name: localStorage.getItem(\"restaurant_name\")\r\n        };\r\n        this.handleClick = this.handleClick.bind(this);\r\n    }\r\n\r\n    handleClick(event) {\r\n        this.setState({\r\n            currentPage: Number(event.target.id)\r\n        });\r\n    }\r\n    componentDidMount() {\r\n        this.renderMyData();\r\n    }\r\n\r\n    async renderMyData() {\r\n        console.log(\"render data\");\r\n        if (localStorage.getItem(\"token\")!=null) {\r\n            let data = {\r\n                id: localStorage.getItem('_id'),\r\n                email: localStorage.getItem('email'),\r\n                name: localStorage.getItem('restaurant_name')\r\n            }\r\n          await  this.props.getAll(data);\r\n            // console.log(\"sections\", this.props.sections);\r\n        }\r\n    }\r\n\r\n    handleRemoveItem = (e, product,sectionId) => {\r\n        console.log(\"e\", e.target);\r\n        console.log(\"product in handle to cart\", product);\r\n        let data = {\r\n            email: localStorage.getItem('email'),\r\n            name: localStorage.getItem('restaurant_name'),\r\n            section_id:sectionId,\r\n            product: product\r\n        }\r\n        this.props.deleteSectionItem(data);\r\n        this.renderMyData();\r\n    }\r\n\r\n    render() {\r\n      \r\n        if (this.props.sections != undefined) {\r\n            console.log(\"sections agagae\")\r\n            let foodItems=this.props.sections\r\n            const { currentPage, todosPerPage } = this.state;\r\n\r\n            // Logic for displaying todos\r\n            const indexOfLastTodo = currentPage * todosPerPage;\r\n            const indexOfFirstTodo = indexOfLastTodo - todosPerPage;\r\n            const currentTodos = foodItems.slice(indexOfFirstTodo, indexOfLastTodo);\r\n\r\n            // Logic for displaying page numbers\r\n            const pageNumbers = [];\r\n            for (let i = 1; i <= Math.ceil(foodItems.length / todosPerPage); i++) {\r\n                pageNumbers.push(i);\r\n            }\r\n\r\n            this.state.renderPageNumbers = pageNumbers.map(number => {\r\n                return (\r\n\r\n                    <li\r\n                        key={number}\r\n                        id={number}\r\n                        onClick={this.handleClick}\r\n                    >\r\n                        {number} \r\n                    </li>  \r\n                );\r\n            });\r\n\r\n            if (localStorage.getItem(\"token\")==null && localStorage.getItem(\"type\")!=\"owner\") {\r\n                return (<Redirect to=\"/\" />)\r\n              }\r\n            console.log(\"menu\", this.props.sections)\r\n            this.state.menu = <Products products={currentTodos} type={\"owner\"} handleRemoveItem={this.handleRemoveItem} />\r\n        }\r\n        return (\r\n            <div>\r\n                <Navbar color=\"light\" light expand=\"md\">\r\n                    <NavbarBrand href=\"/\">GRUBHUB</NavbarBrand>\r\n                    <NavbarToggler onClick={this.toggle} />\r\n                    <Collapse isOpen={this.state.isOpen} navbar>\r\n                        <Nav className=\"ml-auto\" navbar>\r\n                            <UncontrolledDropdown nav inNavbar>\r\n                                <DropdownToggle nav caret>\r\n                                    Hi,{this.state.name}\r\n                                </DropdownToggle>\r\n                                <DropdownMenu right>\r\n                                    <DropdownItem href=\"/ordero\">\r\n                                        Orders\r\n                      </DropdownItem>\r\n                                    <DropdownItem href=\"/profile\">\r\n                                        Account\r\n                      </DropdownItem>\r\n                                    <DropdownItem divider />\r\n                                    <DropdownItem href=\"/logout\">\r\n                                        Logout\r\n                      </DropdownItem>\r\n                                </DropdownMenu>\r\n                            </UncontrolledDropdown>\r\n                        </Nav>\r\n                    </Collapse>\r\n                </Navbar>\r\n                <div className=\"container\">\r\n                    <hr />\r\n                    <div className=\"row\">\r\n                        <div className=\"col-md-9\">\r\n                            <div style={{ display: 'inline-block' }}>\r\n                                <h2>MENU PAGE</h2>\r\n                                <a class=\"btn btn-default\" style={{ position: 'absolute', right: 1, backgroundColor: '#000CBA', color: \"#FFF000\" }} href=\"/addS\" class=\"updatemenu\">UPDATE MENU</a>\r\n                            </div>\r\n                            <hr />\r\n\r\n                            <ul>\r\n                                {this.state.menu}\r\n                            </ul>\r\n                           <div style={{display:'flex',flexDirection:'row'}}>\r\n                           <ul class=\"footer\">\r\n                               {/* <li>Pages</li> */}\r\n                                {this.state.renderPageNumbers}\r\n                            </ul>\r\n                            </div> \r\n                           \r\n                            {/* {menu} */}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nfunction mapStateToProps(store) {\r\n    return {\r\n        output: store.section.output,\r\n        message: store.section.message,\r\n        sections: store.section.sections\r\n    }\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n    return {\r\n        getAll: (data) => dispatch(getAll(data)),\r\n        deleteSectionItem: (data) => dispatch(deleteSectionItem(data))\r\n    }\r\n}\r\n\r\nexport default withApollo(ItemsPage);"]},"metadata":{},"sourceType":"module"}