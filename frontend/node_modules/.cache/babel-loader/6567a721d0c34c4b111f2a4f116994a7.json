{"ast":null,"code":"import { GET_MSG, PUT_MSG } from '../constants/actionsConstants';\nimport axios from 'axios';\nimport { HOST } from '../constants/host';\nexport function updateChat(data) {\n  console.log(\"updateChat \", data);\n  var body = {\n    'order_id': data.order_id._id,\n    'cart': data.order_id.items,\n    'email': localStorage.getItem(\"email\"),\n    'name': localStorage.getItem(\"name\"),\n    'id': localStorage.getItem(\"_id\"),\n    'restaurant_name': localStorage.getItem(\"restaurant_name\") ? localStorage.getItem(\"restaurant_name\") : null,\n    'restaurant_id': localStorage.getItem(\"restaurant_id\") ? localStorage.getItem(\"restaurant_id\") : null,\n    'chat': data.chat\n  };\n  console.log(\"chat body \", body);\n  return function (dispatch) {\n    axios.post('http://' + HOST + '/mmsg/putMsg', body).then(function (response) {\n      console.log(\"chat updated\");\n      dispatch(sendChat(response));\n    });\n  };\n}\n\nfunction sendChat(data) {\n  return {\n    type: PUT_MSG,\n    payload: data\n  };\n}\n\nexport function getChat(data) {\n  if (data != undefined) {\n    var body = {\n      'order_id': data\n    };\n    console.log(\"chat body \", body);\n    return function (dispatch) {\n      axios.post('http://' + HOST + '/mmsg/getMsg', body).then(function (response) {\n        console.log(\"chat updated\", response);\n        dispatch(retrieveChatHistory(response));\n      });\n    };\n  }\n}\n\nfunction retrieveChatHistory(data) {\n  return {\n    type: GET_MSG,\n    payload: data\n  };\n}","map":{"version":3,"sources":["/Users/sakshi/Documents/AllCodes/React/273/lab/frontend/src/Redux/actions/messageActions.js"],"names":["GET_MSG","PUT_MSG","axios","HOST","updateChat","data","console","log","body","order_id","_id","items","localStorage","getItem","chat","dispatch","post","then","response","sendChat","type","payload","getChat","undefined","retrieveChatHistory"],"mappings":"AAAA,SAASA,OAAT,EAAiBC,OAAjB,QAAgC,+BAAhC;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,IAAT,QAAqB,mBAArB;AAGA,OAAO,SAASC,UAAT,CAAoBC,IAApB,EAA0B;AAC7BC,EAAAA,OAAO,CAACC,GAAR,CAAY,aAAZ,EAA2BF,IAA3B;AACA,MAAIG,IAAI,GAAG;AACT,gBAAYH,IAAI,CAACI,QAAL,CAAcC,GADjB;AAET,YAAQL,IAAI,CAACI,QAAL,CAAcE,KAFb;AAGT,aAASC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAHA;AAIT,YAAQD,YAAY,CAACC,OAAb,CAAqB,MAArB,CAJC;AAKT,UAAMD,YAAY,CAACC,OAAb,CAAqB,KAArB,CALG;AAMT,uBAAoBD,YAAY,CAACC,OAAb,CAAqB,iBAArB,IAAwCD,YAAY,CAACC,OAAb,CAAqB,iBAArB,CAAxC,GAAgF,IAN3F;AAOT,qBAAkBD,YAAY,CAACC,OAAb,CAAqB,eAArB,IAAsCD,YAAY,CAACC,OAAb,CAAqB,eAArB,CAAtC,GAA4E,IAPrF;AAQT,YAAQR,IAAI,CAACS;AARJ,GAAX;AAUAR,EAAAA,OAAO,CAACC,GAAR,CAAY,YAAZ,EAA0BC,IAA1B;AACA,SAAO,UAACO,QAAD,EAAc;AACnBb,IAAAA,KAAK,CAACc,IAAN,CAAW,YAAUb,IAAV,GAAe,cAA1B,EAA0CK,IAA1C,EACGS,IADH,CACQ,UAACC,QAAD,EAAa;AACjBZ,MAAAA,OAAO,CAACC,GAAR,CAAY,cAAZ;AACAQ,MAAAA,QAAQ,CAACI,QAAQ,CAACD,QAAD,CAAT,CAAR;AAA6B,KAHjC;AAID,GALD;AAMD;;AAED,SAASC,QAAT,CAAkBd,IAAlB,EAAwB;AACtB,SAAO;AAAEe,IAAAA,IAAI,EAAEnB,OAAR;AAAiBoB,IAAAA,OAAO,EAAEhB;AAA1B,GAAP;AACD;;AAGH,OAAO,SAASiB,OAAT,CAAiBjB,IAAjB,EAAuB;AAC5B,MAAGA,IAAI,IAAEkB,SAAT,EAAmB;AACjB,QAAIf,IAAI,GAAG;AACT,kBAAYH;AADH,KAAX;AAGAC,IAAAA,OAAO,CAACC,GAAR,CAAY,YAAZ,EAA0BC,IAA1B;AACA,WAAO,UAACO,QAAD,EAAc;AACnBb,MAAAA,KAAK,CAACc,IAAN,CAAW,YAAUb,IAAV,GAAe,cAA1B,EAA0CK,IAA1C,EACGS,IADH,CACQ,UAACC,QAAD,EAAa;AACjBZ,QAAAA,OAAO,CAACC,GAAR,CAAY,cAAZ,EAA2BW,QAA3B;AACAH,QAAAA,QAAQ,CAACS,mBAAmB,CAACN,QAAD,CAApB,CAAR;AAAwC,OAH5C;AAID,KALD;AAMD;AACA;;AAED,SAASM,mBAAT,CAA6BnB,IAA7B,EAAmC;AACjC,SAAO;AAAEe,IAAAA,IAAI,EAAEpB,OAAR;AAAiBqB,IAAAA,OAAO,EAAEhB;AAA1B,GAAP;AACD","sourcesContent":["import { GET_MSG,PUT_MSG } from '../constants/actionsConstants';\r\nimport axios from 'axios';\r\nimport { HOST } from '../constants/host';\r\n\r\n\r\nexport function updateChat(data) {\r\n    console.log(\"updateChat \", data);\r\n    let body = {\r\n      'order_id': data.order_id._id,\r\n      'cart': data.order_id.items,\r\n      'email': localStorage.getItem(\"email\"),\r\n      'name': localStorage.getItem(\"name\"),\r\n      'id': localStorage.getItem(\"_id\"),\r\n      'restaurant_name' : localStorage.getItem(\"restaurant_name\")?localStorage.getItem(\"restaurant_name\"):null,\r\n      'restaurant_id' : localStorage.getItem(\"restaurant_id\")?localStorage.getItem(\"restaurant_id\"):null,\r\n      'chat': data.chat\r\n    }\r\n    console.log(\"chat body \", body)\r\n    return (dispatch) => {\r\n      axios.post('http://'+HOST+'/mmsg/putMsg', body)\r\n        .then((response) =>{ \r\n          console.log(\"chat updated\");\r\n          dispatch(sendChat(response))})\r\n    }\r\n  }\r\n\r\n  function sendChat(data) {\r\n    return { type: PUT_MSG, payload: data }\r\n  }\r\n\r\n\r\nexport function getChat(data) {\r\n  if(data!=undefined){\r\n    let body = {\r\n      'order_id': data,\r\n    }\r\n    console.log(\"chat body \", body)\r\n    return (dispatch) => {\r\n      axios.post('http://'+HOST+'/mmsg/getMsg', body)\r\n        .then((response) =>{ \r\n          console.log(\"chat updated\",response);\r\n          dispatch(retrieveChatHistory(response))})\r\n    }\r\n  }\r\n  }\r\n  \r\n  function retrieveChatHistory(data) {\r\n    return { type: GET_MSG, payload: data }\r\n  }\r\n\r\n"]},"metadata":{},"sourceType":"module"}