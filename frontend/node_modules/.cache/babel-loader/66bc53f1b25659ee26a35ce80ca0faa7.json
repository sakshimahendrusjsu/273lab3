{"ast":null,"code":"import { SIGN } from '../constants/actionsConstants';\nimport axios from 'axios';\nimport { HOST } from '../constants/host';\nexport function signup(formdata) {\n  console.log(\"Signup\", formdata);\n  console.log('http://' + HOST + '/msignup/signup');\n  return dispatch => {\n    axios.post('http://' + HOST + '/msignup/signup', formdata).then(response => dispatch(updateSignUp(response))).catch(error => {\n      console.log(\"catch\", dispatch(updateSignUp(error)));\n    });\n  };\n}\n\nfunction updateSignUp(returndata) {\n  console.log(\"in sign up update\", returndata);\n\n  if (returndata !== undefined) {\n    return {\n      type: SIGN,\n      payload: returndata.data\n    };\n  } else {\n    return {\n      type: SIGN,\n      payload: returndata.response.data\n    };\n  }\n}\n\nexport function signin(formdata) {\n  console.log(\"Signin\", formdata);\n  console.log('http://' + HOST + '/msignup/signup');\n  axios.defaults.withCredentials = true;\n  return dispatch => {\n    axios.post('http://' + HOST + '/mlogin/login', formdata).then(response => dispatch(updateSignIn(response))).catch(error => {\n      console.log(\"catch\", dispatch(updateSignUp(error.response)));\n    });\n  };\n}\n\nfunction updateSignIn(returndata) {\n  console.log(\"in sign in function\", returndata);\n\n  if (returndata !== undefined && returndata.data.output) {\n    console.log(\"localstorage\");\n    console.log(\"data\", returndata.data);\n    console.log(\"type\", returndata.data.user.user_type);\n    localStorage.setItem(\"email\", returndata.data.user.email);\n    localStorage.setItem(\"type\", returndata.data.user.user_type);\n    localStorage.setItem(\"token\", returndata.data.token);\n    localStorage.setItem(\"_id\", returndata.data.user._id);\n    localStorage.setItem(\"restaurant_name\", returndata.data.user.restaurant_name);\n    return {\n      type: SIGN,\n      payload: returndata.data\n    };\n  }\n\n  if (returndata !== undefined) {\n    console.log(\"somethign went wrong\", returndata.data);\n    return {\n      type: SIGN,\n      payload: returndata.data\n    };\n  } else {\n    return {\n      type: SIGN,\n      payload: returndata.response.data\n    };\n  }\n}","map":{"version":3,"sources":["/Users/sakshi/Documents/AllCodes/React/273/lab/frontend/src/Redux/actions/loginActions.js"],"names":["SIGN","axios","HOST","signup","formdata","console","log","dispatch","post","then","response","updateSignUp","catch","error","returndata","undefined","type","payload","data","signin","defaults","withCredentials","updateSignIn","output","user","user_type","localStorage","setItem","email","token","_id","restaurant_name"],"mappings":"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","sourcesContent":["import { SIGN } from '../constants/actionsConstants';\r\nimport axios from 'axios';\r\nimport {HOST} from '../constants/host';\r\n\r\nexport function signup(formdata) {\r\n  console.log(\"Signup\", formdata);\r\n  console.log('http://'+HOST+'/msignup/signup');\r\n  return (dispatch) => {\r\n    axios.post('http://'+HOST+'/msignup/signup', formdata)\r\n      .then((response) => dispatch(updateSignUp(response)))\r\n      .catch(error => {\r\n        console.log(\"catch\", dispatch(updateSignUp(error)));\r\n      })\r\n  }\r\n}\r\n\r\nfunction updateSignUp(returndata) {\r\n  console.log(\"in sign up update\", returndata);\r\n  if(returndata!==undefined){\r\n  return { type: SIGN, payload: returndata.data }\r\n  }else{\r\n    return { type: SIGN, payload: returndata.response.data }\r\n  }\r\n}\r\n\r\nexport function signin(formdata) {\r\n  console.log(\"Signin\", formdata);\r\n  console.log('http://'+HOST+'/msignup/signup');\r\n  axios.defaults.withCredentials = true;\r\n  return (dispatch) => {\r\n    axios.post('http://'+HOST+'/mlogin/login', formdata)\r\n      .then((response) => dispatch(updateSignIn(response)))\r\n      .catch(error => {\r\n        console.log(\"catch\", dispatch(updateSignUp(error.response)));\r\n      })\r\n  }\r\n}\r\n\r\nfunction updateSignIn(returndata) {\r\n  console.log(\"in sign in function\", returndata);\r\n  if (returndata!==undefined && returndata.data.output) {\r\n    console.log(\"localstorage\");\r\n    console.log(\"data\",returndata.data);\r\n    console.log(\"type\",returndata.data.user.user_type);\r\n    localStorage.setItem(\"email\", returndata.data.user.email)\r\n    localStorage.setItem(\"type\", returndata.data.user.user_type);\r\n    localStorage.setItem(\"token\", returndata.data.token);\r\n    localStorage.setItem(\"_id\",returndata.data.user._id);\r\n    localStorage.setItem(\"restaurant_name\",returndata.data.user.restaurant_name);\r\n    return { type: SIGN, payload: returndata.data }\r\n  }\r\n  if (returndata!==undefined){\r\n    console.log(\"somethign went wrong\",returndata.data);\r\n    return { type: SIGN, payload: returndata.data }\r\n  }\r\n  else{\r\n    return { type: SIGN, payload: returndata.response.data }\r\n  }\r\n}"]},"metadata":{},"sourceType":"module"}