{"ast":null,"code":"import _regeneratorRuntime from \"/Users/sakshi/Documents/AllCodes/React/273/lab/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/sakshi/Documents/AllCodes/React/273/lab/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/Users/sakshi/Documents/AllCodes/React/273/lab/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/sakshi/Documents/AllCodes/React/273/lab/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/sakshi/Documents/AllCodes/React/273/lab/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/sakshi/Documents/AllCodes/React/273/lab/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/sakshi/Documents/AllCodes/React/273/lab/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/Users/sakshi/Documents/AllCodes/React/273/lab/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _objectSpread from \"/Users/sakshi/Documents/AllCodes/React/273/lab/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _slicedToArray from \"/Users/sakshi/Documents/AllCodes/React/273/lab/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/sakshi/Documents/AllCodes/React/273/lab/frontend/src/ManageOrders/BuyerOrder.js\";\nimport React, { Component } from 'react';\nimport { DragDropContext, Droppable, Draggable } from 'react-beautiful-dnd';\nimport { Collapse, Navbar, Card, CardImg, CardText, CardBody, Button, CardTitle, CardSubtitle, NavbarToggler, NavbarBrand, Nav, NavItem, NavLink, UncontrolledDropdown, DropdownToggle, DropdownMenu, DropdownItem } from 'reactstrap';\nimport { connect } from 'react-redux';\nimport { Link } from 'react-router-dom';\nimport { getOrderDeatilsBuyer as _getOrderDeatilsBuyer } from '../Redux/actions/orderActions'; // a little function to help us with reordering the result\n\nvar reorder = function reorder(list, startIndex, endIndex) {\n  console.log(\"reorder list\", list);\n  console.log(\"startIndex\", startIndex);\n  var result = Array.from(list);\n\n  var _result$splice = result.splice(startIndex, 1),\n      _result$splice2 = _slicedToArray(_result$splice, 1),\n      removed = _result$splice2[0];\n\n  result.splice(endIndex, 0, removed);\n  return result;\n};\n/**\r\n * Moves an item from one list to another list.\r\n */\n\n\nvar move = function move(source, destination, droppableSource, droppableDestination) {\n  var sourceClone = Array.from(source);\n  var destClone = Array.from(destination);\n\n  var _sourceClone$splice = sourceClone.splice(droppableSource.index, 1),\n      _sourceClone$splice2 = _slicedToArray(_sourceClone$splice, 1),\n      removed = _sourceClone$splice2[0];\n\n  destClone.splice(droppableDestination.index, 0, removed);\n  var result = {};\n  result[droppableSource.droppableId] = sourceClone;\n  result[droppableDestination.droppableId] = destClone;\n  return result;\n};\n\nvar grid = 8;\n\nvar getItemStyle = function getItemStyle(isDragging, draggableStyle) {\n  return _objectSpread({\n    // some basic styles to make the items look a bit nicer\n    userSelect: 'none',\n    padding: grid * 2,\n    margin: \"0 0 \".concat(grid, \"px 0\"),\n    // change background colour if dragging\n    background: isDragging ? 'lightgreen' : 'lightpurple'\n  }, draggableStyle);\n};\n\nvar getListStyle = function getListStyle(isDraggingOver) {\n  return {\n    background: isDraggingOver ? 'lightblue' : 'white',\n    padding: grid // width: 250\n\n  };\n};\n\nvar BuyerOrder =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(BuyerOrder, _Component);\n\n  function BuyerOrder(props) {\n    var _this;\n\n    _classCallCheck(this, BuyerOrder);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(BuyerOrder).call(this, props));\n    _this.id2List = {\n      droppable: 'list1',\n      droppable2: 'list2'\n    };\n\n    _this.getList = function (id) {\n      return _this.state[_this.id2List[id]];\n    };\n\n    _this.onDragEnd = function (result) {\n      var source = result.source,\n          destination = result.destination;\n      console.log(\"result\", result); // dropped outside the list\n\n      if (!destination) {\n        return;\n      }\n\n      console.log(\"onDragEnd\");\n      console.log(\"source\", source);\n      console.log(\"destination\", destination);\n\n      if (source.droppableId === destination.droppableId) {\n        var items = reorder(_this.getList(source.droppableId), source.index, destination.index);\n\n        if (source.droppableId === 'droppable2') {\n          _this.setState({\n            list2: items\n          });\n        } else {\n          _this.setState({\n            list1: items\n          });\n        } // this.setState(state);\n\n      } else {\n        var _result = move(_this.getList(source.droppableId), _this.getList(destination.droppableId), source, destination);\n\n        _this.setState({\n          list1: _result.droppable,\n          list2: _result.droppable2\n        });\n      }\n    };\n\n    _this.toggle = _this.toggle.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.state = {\n      rows: [],\n      status: \"\",\n      results: [],\n      orderItems: [],\n      list1: [],\n      list2: [] // items: getItems(10),\n      // selected: getItems(5, 10)\n\n    };\n    return _this;\n  }\n  /**\r\n   * A semi-generic way to handle multiple lists. Matches\r\n   * the IDs of the droppable container to the names of the\r\n   * source arrays stored in the state.\r\n   */\n\n\n  _createClass(BuyerOrder, [{\n    key: \"toggle\",\n    value: function toggle() {\n      this.setState({\n        isOpen: !this.state.isOpen\n      });\n    }\n  }, {\n    key: \"submitSignIn\",\n    value: function submitSignIn(e, status) {\n      console.log(\"stats\", status);\n      this.state.status = status;\n      this.renderMyData();\n    }\n  }, {\n    key: \"renderMyData\",\n    value: function () {\n      var _renderMyData = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee() {\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                this.setState({\n                  results: []\n                });\n                console.log(\"CURRENT STATE\", this.state.status);\n                _context.next = 4;\n                return this.props.getOrderDeatilsBuyer(this.state.status);\n\n              case 4:\n                console.log(this.props.orderItems);\n                this.setOrderDetails();\n\n              case 6:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function renderMyData() {\n        return _renderMyData.apply(this, arguments);\n      }\n\n      return renderMyData;\n    }()\n  }, {\n    key: \"setOrderDetails\",\n    value: function setOrderDetails() {\n      console.log(\"setOrderDetails\");\n\n      if (this.props.orderItems != undefined) {\n        var len = this.props.orderItems.length;\n        console.log(Math.floor(len / 2));\n        var even = len % 2 == 0 ? Math.floor(len / 2) : Math.floor(len / 2) + 1;\n        var odd = Math.floor(len / 2);\n        this.props.orderItems.map(function (item, index) {\n          if (item.list_index == null) {\n            if (even > 0) {\n              item.list_index = even;\n              item.div_index = 0;\n              even--;\n            } else {\n              if (odd > 0) {\n                item.list_index = odd;\n                item.div_index = 1;\n                even--;\n              }\n            }\n          } else if (item.div_index == 1) {\n            odd--;\n          } else if (item.div_index == 0) {\n            even--;\n          }\n\n          item.id = index + 1;\n        });\n        this.state.list1 = this.props.orderItems.filter(function (item) {\n          return item.div_index === 0;\n        });\n        console.log(\"lit1\", this.state.list1);\n        this.state.list2 = this.props.orderItems.filter(function (item) {\n          return item.div_index === 1;\n        });\n        console.log(\"lit2\", this.state.list2);\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 179\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 179\n        },\n        __self: this\n      }, React.createElement(Navbar, {\n        color: \"light\",\n        light: true,\n        expand: \"md\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 180\n        },\n        __self: this\n      }, React.createElement(NavbarBrand, {\n        href: \"/\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 181\n        },\n        __self: this\n      }, \"GRUBHUB\"), React.createElement(NavbarToggler, {\n        onClick: this.toggle,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 182\n        },\n        __self: this\n      }), React.createElement(Collapse, {\n        isOpen: this.state.isOpen,\n        navbar: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 183\n        },\n        __self: this\n      }, React.createElement(Nav, {\n        className: \"ml-auto\",\n        navbar: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 184\n        },\n        __self: this\n      }, React.createElement(UncontrolledDropdown, {\n        nav: true,\n        inNavbar: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 185\n        },\n        __self: this\n      }, React.createElement(DropdownToggle, {\n        nav: true,\n        caret: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 186\n        },\n        __self: this\n      }, \"Hi,\", this.props.first), React.createElement(DropdownMenu, {\n        right: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 189\n        },\n        __self: this\n      }, React.createElement(DropdownItem, {\n        href: \"/order\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 190\n        },\n        __self: this\n      }, \"Orders\"), React.createElement(DropdownItem, {\n        href: \"/profile\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 193\n        },\n        __self: this\n      }, \"Account\"), React.createElement(DropdownItem, {\n        divider: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 196\n        },\n        __self: this\n      }), React.createElement(DropdownItem, {\n        href: \"/logout\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 197\n        },\n        __self: this\n      }, \"Logout\")))))), React.createElement(\"h1\", {\n        id: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 205\n        },\n        __self: this\n      }, \"My Orders\"), React.createElement(Nav, {\n        pills: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 206\n        },\n        __self: this\n      }, React.createElement(NavItem, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 207\n        },\n        __self: this\n      }, React.createElement(NavLink, {\n        active: true,\n        onClick: function onClick(e) {\n          return _this2.submitSignIn(e, \"NEW\");\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 208\n        },\n        __self: this\n      }, \"NEW\")), React.createElement(NavItem, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 210\n        },\n        __self: this\n      }, React.createElement(NavLink, {\n        onClick: function onClick(e) {\n          return _this2.submitSignIn(e, \"PREPARING\");\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 211\n        },\n        __self: this\n      }, \"PREPARING\")), React.createElement(NavItem, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 213\n        },\n        __self: this\n      }, React.createElement(NavLink, {\n        onClick: function onClick(e) {\n          return _this2.submitSignIn(e, \"READY\");\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 214\n        },\n        __self: this\n      }, \"READY\")), React.createElement(NavItem, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 216\n        },\n        __self: this\n      }, React.createElement(NavLink, {\n        onClick: function onClick(e) {\n          return _this2.submitSignIn(e, \"DELIVERED\");\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 217\n        },\n        __self: this\n      }, \"PAST ORDERS\")), React.createElement(NavItem, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 219\n        },\n        __self: this\n      }, React.createElement(NavLink, {\n        onClick: function onClick(e) {\n          return _this2.submitSignIn(e, \"CANCELLED\");\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 220\n        },\n        __self: this\n      }, \"CANCELLED\")))), React.createElement(\"div\", {\n        style: {\n          display: 'flex',\n          flexDirection: 'row'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 224\n        },\n        __self: this\n      }, React.createElement(DragDropContext, {\n        onDragEnd: this.onDragEnd,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 225\n        },\n        __self: this\n      }, React.createElement(Droppable, {\n        droppableId: \"droppable\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 226\n        },\n        __self: this\n      }, function (provided, snapshot) {\n        return React.createElement(\"div\", {\n          ref: provided.innerRef,\n          style: getListStyle(snapshot.isDraggingOver),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 228\n          },\n          __self: this\n        }, _this2.state.list1.map(function (item, index) {\n          return React.createElement(Draggable, {\n            key: item.id,\n            draggableId: item.id,\n            index: index,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 232\n            },\n            __self: this\n          }, function (provided, snapshot) {\n            return React.createElement(\"div\", Object.assign({\n              ref: provided.innerRef\n            }, provided.draggableProps, provided.dragHandleProps, {\n              style: getItemStyle(snapshot.isDragging, provided.draggableProps.style),\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 237\n              },\n              __self: this\n            }), React.createElement(Card, {\n              body: true,\n              inverse: true,\n              color: \"warning\",\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 245\n              },\n              __self: this\n            }, React.createElement(CardBody, {\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 246\n              },\n              __self: this\n            }, React.createElement(CardTitle, {\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 247\n              },\n              __self: this\n            }, \"Order Id # \", item._id, \"    .\", React.createElement(Link, {\n              to: {\n                pathname: '/chat',\n                state: {\n                  orderId: item,\n                  userId: item.buyer_email,\n                  userId2: item.restaurant_name,\n                  id: item.buyer_id\n                }\n              },\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 248\n              },\n              __self: this\n            }, React.createElement(Button, {\n              variant: \"outline-danger\",\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 248\n              },\n              __self: this\n            }, \" Need Help?\"))), React.createElement(CardSubtitle, {\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 250\n              },\n              __self: this\n            }, \"Restuarant Name : \", item.restaurant_name), React.createElement(CardText, {\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 251\n              },\n              __self: this\n            }, \"Order status : \", item.status, React.createElement(\"br\", {\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 251\n              },\n              __self: this\n            }), \"Total : \", item.total_price))));\n          });\n        }), provided.placeholder);\n      }), React.createElement(Droppable, {\n        droppableId: \"droppable2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 264\n        },\n        __self: this\n      }, function (provided, snapshot) {\n        return React.createElement(\"div\", {\n          ref: provided.innerRef,\n          style: getListStyle(snapshot.isDraggingOver),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 266\n          },\n          __self: this\n        }, _this2.state.list2.map(function (item, index) {\n          return React.createElement(Draggable, {\n            key: item.id,\n            draggableId: item.id,\n            index: index,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 270\n            },\n            __self: this\n          }, function (provided, snapshot) {\n            return React.createElement(\"div\", Object.assign({\n              ref: provided.innerRef\n            }, provided.draggableProps, provided.dragHandleProps, {\n              style: getItemStyle(snapshot.isDragging, provided.draggableProps.style),\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 275\n              },\n              __self: this\n            }), React.createElement(Card, {\n              body: true,\n              inverse: true,\n              color: \"info\",\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 283\n              },\n              __self: this\n            }, React.createElement(CardBody, {\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 284\n              },\n              __self: this\n            }, React.createElement(CardTitle, {\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 285\n              },\n              __self: this\n            }, \"Order Id #\", item._id, \"     .\", React.createElement(Link, {\n              to: {\n                pathname: '/chat',\n                state: {\n                  orderId: item\n                }\n              },\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 286\n              },\n              __self: this\n            }, React.createElement(Button, {\n              variant: \"outline-danger\",\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 286\n              },\n              __self: this\n            }, \"Need Help?\"))), React.createElement(CardSubtitle, {\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 288\n              },\n              __self: this\n            }, \"Restuarant Name : \", item.restaurant_name), React.createElement(CardText, {\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 289\n              },\n              __self: this\n            }, \"Order status : \", item.status, React.createElement(\"br\", {\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 289\n              },\n              __self: this\n            }), \"Total :\", item.total_price))));\n          });\n        }), provided.placeholder);\n      }))));\n    }\n  }]);\n\n  return BuyerOrder;\n}(Component);\n\nfunction mapStateToProps(store) {\n  return {\n    output: store.order.ouput,\n    message: store.order.message,\n    orderItems: store.order.orderItems\n  };\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    getOrderDeatilsBuyer: function getOrderDeatilsBuyer(data) {\n      return dispatch(_getOrderDeatilsBuyer(data));\n    }\n  };\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(BuyerOrder);","map":{"version":3,"sources":["/Users/sakshi/Documents/AllCodes/React/273/lab/frontend/src/ManageOrders/BuyerOrder.js"],"names":["React","Component","DragDropContext","Droppable","Draggable","Collapse","Navbar","Card","CardImg","CardText","CardBody","Button","CardTitle","CardSubtitle","NavbarToggler","NavbarBrand","Nav","NavItem","NavLink","UncontrolledDropdown","DropdownToggle","DropdownMenu","DropdownItem","connect","Link","getOrderDeatilsBuyer","reorder","list","startIndex","endIndex","console","log","result","Array","from","splice","removed","move","source","destination","droppableSource","droppableDestination","sourceClone","destClone","index","droppableId","grid","getItemStyle","isDragging","draggableStyle","userSelect","padding","margin","background","getListStyle","isDraggingOver","BuyerOrder","props","id2List","droppable","droppable2","getList","id","state","onDragEnd","items","setState","list2","list1","toggle","bind","rows","status","results","orderItems","isOpen","e","renderMyData","setOrderDetails","undefined","len","length","Math","floor","even","odd","map","item","list_index","div_index","filter","first","submitSignIn","display","flexDirection","provided","snapshot","innerRef","draggableProps","dragHandleProps","style","_id","pathname","orderId","userId","buyer_email","userId2","restaurant_name","buyer_id","total_price","placeholder","mapStateToProps","store","output","order","ouput","message","mapDispatchToProps","dispatch","data"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport { DragDropContext, Droppable, Draggable } from 'react-beautiful-dnd';\r\nimport { Collapse, Navbar,  Card, CardImg, CardText, CardBody,Button,\r\n  CardTitle, CardSubtitle,NavbarToggler, NavbarBrand, Nav, NavItem, NavLink, UncontrolledDropdown, DropdownToggle, DropdownMenu, DropdownItem } from 'reactstrap'\r\nimport { connect } from 'react-redux';\r\nimport {Link} from 'react-router-dom';\r\nimport { getOrderDeatilsBuyer } from '../Redux/actions/orderActions';\r\n// a little function to help us with reordering the result\r\nconst reorder = (list, startIndex, endIndex) => {\r\n  console.log(\"reorder list\", list);\r\n  console.log(\"startIndex\", startIndex);\r\n  const result = Array.from(list);\r\n  const [removed] = result.splice(startIndex, 1);\r\n  result.splice(endIndex, 0, removed);\r\n  return result;\r\n};\r\n\r\n/**\r\n * Moves an item from one list to another list.\r\n */\r\nconst move = (source, destination, droppableSource, droppableDestination) => {\r\n  const sourceClone = Array.from(source);\r\n  const destClone = Array.from(destination);\r\n  const [removed] = sourceClone.splice(droppableSource.index, 1);\r\n  destClone.splice(droppableDestination.index, 0, removed);\r\n  const result = {};\r\n  result[droppableSource.droppableId] = sourceClone;\r\n  result[droppableDestination.droppableId] = destClone;\r\n\r\n  return result;\r\n};\r\n\r\nconst grid = 8;\r\n\r\nconst getItemStyle = (isDragging, draggableStyle) => ({\r\n  // some basic styles to make the items look a bit nicer\r\n  userSelect: 'none',\r\n  padding: grid * 2,\r\n  margin: `0 0 ${grid}px 0`,\r\n\r\n  // change background colour if dragging\r\n  background: isDragging ? 'lightgreen' : 'lightpurple',\r\n\r\n  // styles we need to apply on draggables\r\n  ...draggableStyle\r\n});\r\n\r\nconst getListStyle = isDraggingOver => ({\r\n  background: isDraggingOver ? 'lightblue' : 'white',\r\n  padding: grid,\r\n  // width: 250\r\n});\r\n\r\nclass BuyerOrder extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.toggle = this.toggle.bind(this);\r\n    this.state = {\r\n      rows: [],\r\n      status: \"\",\r\n      results: [],\r\n      orderItems: [],\r\n      list1: [],\r\n      list2: [],\r\n      // items: getItems(10),\r\n      // selected: getItems(5, 10)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * A semi-generic way to handle multiple lists. Matches\r\n   * the IDs of the droppable container to the names of the\r\n   * source arrays stored in the state.\r\n   */\r\n  id2List = {\r\n    droppable: 'list1',\r\n    droppable2: 'list2'\r\n  };\r\n\r\n  getList = id => this.state[this.id2List[id]];\r\n\r\n  onDragEnd = result => {\r\n    const { source, destination } = result;\r\n    console.log(\"result\", result);\r\n    // dropped outside the list\r\n    if (!destination) {\r\n      return;\r\n    }\r\n    console.log(\"onDragEnd\");\r\n    console.log(\"source\", source);\r\n    console.log(\"destination\", destination);\r\n    if (source.droppableId === destination.droppableId) {\r\n      const items = reorder(\r\n        this.getList(source.droppableId),\r\n        source.index,\r\n        destination.index\r\n      );\r\n\r\n      if (source.droppableId === 'droppable2') {\r\n        this.setState({ list2: items });\r\n      } else {\r\n        this.setState({ list1: items });\r\n      }\r\n      // this.setState(state);\r\n    } else {\r\n      const result = move(\r\n        this.getList(source.droppableId),\r\n        this.getList(destination.droppableId),\r\n        source,\r\n        destination\r\n      );\r\n      this.setState({\r\n        list1: result.droppable,\r\n        list2: result.droppable2\r\n      });\r\n    }\r\n  };\r\n\r\n  toggle() {\r\n    this.setState({\r\n      isOpen: !this.state.isOpen\r\n    });\r\n  }\r\n\r\n  submitSignIn(e, status) {\r\n    console.log(\"stats\", status)\r\n    this.state.status = status;\r\n    this.renderMyData();\r\n  }\r\n\r\n  async renderMyData() {\r\n    this.setState({\r\n      results: [],\r\n    });\r\n    console.log(\"CURRENT STATE\", this.state.status);\r\n    await this.props.getOrderDeatilsBuyer(this.state.status);\r\n    console.log(this.props.orderItems);\r\n    this.setOrderDetails();\r\n  }\r\n\r\n  setOrderDetails() {\r\n    console.log(\"setOrderDetails\"); \r\n    if (this.props.orderItems != undefined) {\r\n      let len = this.props.orderItems.length;\r\n      console.log(Math.floor(len / 2));\r\n      let even = len % 2 == 0 ? Math.floor(len / 2) : Math.floor(len / 2) + 1\r\n      let odd = Math.floor(len / 2)\r\n      this.props.orderItems.map((item, index) => {\r\n        if (item.list_index == null) {\r\n          if (even > 0) {\r\n            item.list_index = even;\r\n            item.div_index = 0;\r\n            even--;\r\n          } else {\r\n            if (odd > 0) {\r\n              item.list_index = odd;\r\n              item.div_index = 1;\r\n              even--;\r\n            }\r\n          }\r\n        } else if (item.div_index == 1) {\r\n          odd--;\r\n        } else if (item.div_index == 0) {\r\n          even--;\r\n        }\r\n        item.id = index + 1\r\n      }\r\n      );\r\n\r\n      this.state.list1 = this.props.orderItems.filter(item => item.div_index === 0);\r\n      console.log(\"lit1\", this.state.list1);\r\n      this.state.list2 = this.props.orderItems.filter(item => item.div_index === 1);\r\n      console.log(\"lit2\", this.state.list2);\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div><div>\r\n        <Navbar color=\"light\" light expand=\"md\">\r\n          <NavbarBrand href=\"/\">GRUBHUB</NavbarBrand>\r\n          <NavbarToggler onClick={this.toggle} />\r\n          <Collapse isOpen={this.state.isOpen} navbar>\r\n            <Nav className=\"ml-auto\" navbar>\r\n              <UncontrolledDropdown nav inNavbar>\r\n                <DropdownToggle nav caret>\r\n                  Hi,{this.props.first}\r\n                </DropdownToggle>\r\n                <DropdownMenu right>\r\n                  <DropdownItem href=\"/order\">\r\n                    Orders\r\n                          </DropdownItem>\r\n                  <DropdownItem href=\"/profile\">\r\n                    Account\r\n                          </DropdownItem>\r\n                  <DropdownItem divider />\r\n                  <DropdownItem href=\"/logout\">\r\n                    Logout\r\n                          </DropdownItem>\r\n                </DropdownMenu>\r\n              </UncontrolledDropdown>\r\n            </Nav>\r\n          </Collapse>\r\n        </Navbar>\r\n        <h1 id>My Orders</h1>\r\n        <Nav pills>\r\n          <NavItem>\r\n            <NavLink active onClick={(e) => this.submitSignIn(e, \"NEW\")}>NEW</NavLink>\r\n          </NavItem>\r\n          <NavItem>\r\n            <NavLink onClick={(e) => this.submitSignIn(e, \"PREPARING\")}>PREPARING</NavLink>\r\n          </NavItem>\r\n          <NavItem>\r\n            <NavLink onClick={(e) => this.submitSignIn(e, \"READY\")}>READY</NavLink>\r\n          </NavItem>\r\n          <NavItem>\r\n            <NavLink onClick={(e) => this.submitSignIn(e, \"DELIVERED\")}>PAST ORDERS</NavLink>\r\n          </NavItem>\r\n          <NavItem>\r\n            <NavLink onClick={(e) => this.submitSignIn(e, \"CANCELLED\")}>CANCELLED</NavLink>\r\n          </NavItem>\r\n        </Nav>\r\n      </div>\r\n        <div style={{ display: 'flex', flexDirection: 'row' } }>\r\n          <DragDropContext onDragEnd={this.onDragEnd}>\r\n            <Droppable droppableId=\"droppable\">\r\n              {(provided, snapshot) => (\r\n                <div\r\n                  ref={provided.innerRef}\r\n                  style={getListStyle(snapshot.isDraggingOver)}>\r\n                  {this.state.list1.map((item, index) => (\r\n                    <Draggable\r\n                      key={item.id}\r\n                      draggableId={item.id}\r\n                      index={index}>\r\n                      {(provided, snapshot) => (\r\n                        <div\r\n                          ref={provided.innerRef}\r\n                          {...provided.draggableProps}\r\n                          {...provided.dragHandleProps}\r\n                          style={getItemStyle(\r\n                            snapshot.isDragging,\r\n                            provided.draggableProps.style\r\n                          )}>\r\n                          <Card body inverse color=\"warning\">\r\n                            <CardBody>\r\n                              <CardTitle>Order Id # {item._id}    .   \r\n                              <Link to={{ pathname: '/chat', state: {orderId:item,userId:item.buyer_email,userId2:item.restaurant_name,id:item.buyer_id}}}><Button variant=\"outline-danger\"> Need Help?</Button></Link>\r\n                              </CardTitle>\r\n                              <CardSubtitle>Restuarant Name : {item.restaurant_name}</CardSubtitle>\r\n                              <CardText>Order status : {item.status}<br></br>\r\n                              Total : {item.total_price}</CardText>\r\n                            </CardBody>\r\n                            \r\n                          </Card>\r\n                        </div>\r\n                      )}\r\n                    </Draggable>\r\n                  ))}\r\n                  {provided.placeholder}\r\n                </div>\r\n              )}\r\n            </Droppable>\r\n            <Droppable droppableId=\"droppable2\">\r\n              {(provided, snapshot) => (\r\n                <div\r\n                  ref={provided.innerRef}\r\n                  style={getListStyle(snapshot.isDraggingOver)}>\r\n                  {this.state.list2.map((item, index) => (\r\n                    <Draggable\r\n                      key={item.id}\r\n                      draggableId={item.id}\r\n                      index={index}>\r\n                      {(provided, snapshot) => (\r\n                        <div\r\n                          ref={provided.innerRef}\r\n                          {...provided.draggableProps}\r\n                          {...provided.dragHandleProps}\r\n                          style={getItemStyle(\r\n                            snapshot.isDragging,\r\n                            provided.draggableProps.style\r\n                          )}>\r\n                          <Card body inverse color=\"info\">\r\n                            <CardBody>\r\n                              <CardTitle>Order Id #{item._id}     .\r\n                              <Link to={{ pathname: '/chat', state: {orderId:item}}}><Button variant=\"outline-danger\">Need Help?</Button></Link>\r\n                              </CardTitle>\r\n                              <CardSubtitle>Restuarant Name : {item.restaurant_name}</CardSubtitle>\r\n                              <CardText>Order status : {item.status}<br></br>\r\n                              Total :{item.total_price}</CardText>\r\n                            </CardBody>\r\n                          </Card>\r\n                        </div>\r\n                      )}\r\n                    </Draggable>\r\n                  ))}\r\n                  {provided.placeholder}\r\n                </div>\r\n              )}\r\n            </Droppable>\r\n          </DragDropContext>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nfunction mapStateToProps(store) {\r\n  return {\r\n      output: store.order.ouput,\r\n      message: store.order.message,\r\n     orderItems: store.order.orderItems\r\n  }\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n  return {\r\n      getOrderDeatilsBuyer :(data) => dispatch(getOrderDeatilsBuyer(data))\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(BuyerOrder)\r\n"]},"metadata":{},"sourceType":"module"}